<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Edit Profile</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
    .password-warning {
        color: red;
        display: none;
    }
</style>
</head>
<body>
<div class="container">
    <div class="row">
        <nav class="navbar navbar-expand-lg navbar-light bg-primary container-fluid">
            <a class="navbar-brand" href="#">Edit Profile</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('dashboard') }}">Home Page</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('user_profile') }}">User Profile</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('logout') }}">Logout</a>
                    </li>
                </ul>
            </div>
        </nav>
    </div>
    <form method="POST" action="{{ url_for('edit_profile') }}" onsubmit="return validatePasswordMatch()">
        <label for="new_password">New Password:</label>
        <input type="password" name="new_password" id="new_password">
        <i class="eye-icon fa fa-eye" id="eye-new-password" style="cursor: pointer" onclick="togglePassword('new_password', 'eye-new-password')"></i><br><br>
        <label for="confirm_new_password">Confirm New Password:</label>
        <input type="password" name="confirm_new_password" id="confirm_new_password">
        <i class="eye-icon fa fa-eye" id="eye-confirm-new-password" style="cursor: pointer" onclick="togglePassword('confirm_new_password', 'eye-confirm-new-password')"></i><br><br>
        <label for="new_firstname">New First Name:</label>
        <input type="text" name="new_firstname" required><br><br>
        <label for="new_lastname">New Last Name:</label>
        <input type="text" name="new_lastname" required><br><br>
        <label for="new_contactNo">Contact Number:</label>
        <input type="text" name="new_contactNo" required><br><br>
        <label for="new_origin">Origin:</label>
        <input type="text" name="new_origin" required><br><br>
        <div class="password-warning" id="password-warning" style="color: red; display: none;">
            Passwords don't match!
        </div>
        <input type="submit" value="Update Profile">
    </form>
</div>
<script>
    function togglePassword(inputId, iconId) {
        var x = document.getElementById(inputId);
        var icon = document.getElementById(iconId);
        if (x.type === "password") {
            x.type = "text";
            icon.className = "eye-icon fa fa-eye-slash";
        } else {
            x.type = "password";
            icon.className = "eye-icon fa fa-eye";
        }
    }

    function validatePasswordMatch() {
        var newPassword = document.getElementById("new_password").value;
        var confirmNewPassword = document.getElementById("confirm_new_password").value;
        var warning = document.getElementById("password-warning");

        if (newPassword !== confirmNewPassword) {
            warning.style.display = "block";
            return false;
        } else {
            warning.style.display = "none";
            return true;
        }
    }
</script>
</body>
</html>
